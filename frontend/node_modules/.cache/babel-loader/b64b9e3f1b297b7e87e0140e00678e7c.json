{"ast":null,"code":"var _jsxFileName = \"/Users/gabeabud/Code/chess/frontend/src/components/Game.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport Chessboard from 'chessboardjsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport { GameTypes } from '../types';\n\nconst ChessReq = require('chess.js');\n\nconst useStyles = makeStyles({\n  board: {\n    marginTop: '20px',\n    boxShadow: '5px 5px 5px grey'\n  },\n  button: {\n    marginTop: '20px',\n    marginLeft: '10px',\n    marginRight: '10px'\n  }\n});\nvar Turn;\n\n(function (Turn) {\n  Turn[\"W\"] = \"W\";\n  Turn[\"B\"] = \"B\";\n})(Turn || (Turn = {}));\n\n;\n\nconst Game = () => {\n  const classes = useStyles();\n  const [game] = useState(new ChessReq());\n  const [turn, setTurn] = useState(Turn.W);\n  const [fen, setFen] = useState(\"start\");\n  const [gameType, setGameType] = useState(null);\n  useEffect(() => {\n    if (game.game_over()) return;\n\n    if (turn === Turn.B) {\n      setTimeout(() => {\n        const newFen = randomMove(game);\n        if (!newFen) return; // no more legal moves\n\n        setTurn(Turn.W);\n        setFen(newFen);\n      }, 500);\n    }\n  }, [turn, game]);\n\n  const randomMove = game => {\n    const moves = game.moves();\n    const move = moves[Math.floor(Math.random() * moves.length)];\n\n    if (game.move(move) !== null) {\n      return game.fen();\n    }\n\n    return null;\n  };\n\n  const onDrop = ({\n    sourceSquare,\n    targetSquare\n  }) => {\n    if (turn !== Turn.W) return;\n    let move = game.move({\n      from: sourceSquare,\n      to: targetSquare,\n      promotion: 'q' // always promote to queen\n\n    });\n    if (move === null) return;\n    setTurn(Turn.B);\n    setFen(game.fen());\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.board,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(Chessboard, {\n    position: fen,\n    onDrop: onDrop,\n    transitionDuration: 500,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  })), !gameType && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(Button, {\n    className: classes.button,\n    variant: \"contained\",\n    onClick: event => setGameType(GameTypes.RANDOM_COMPUTER),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"Play a Computer\"), React.createElement(Button, {\n    className: classes.button,\n    variant: \"contained\",\n    onClick: event => setGameType(GameTypes.HUMAN),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, \"Play a Person\")));\n};\n\nexport default Game;","map":{"version":3,"sources":["/Users/gabeabud/Code/chess/frontend/src/components/Game.tsx"],"names":["React","useState","useEffect","Chessboard","makeStyles","Button","GameTypes","ChessReq","require","useStyles","board","marginTop","boxShadow","button","marginLeft","marginRight","Turn","Game","classes","game","turn","setTurn","W","fen","setFen","gameType","setGameType","game_over","B","setTimeout","newFen","randomMove","moves","move","Math","floor","random","length","onDrop","sourceSquare","targetSquare","from","to","promotion","event","RANDOM_COMPUTER","HUMAN"],"mappings":"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","sourcesContent":["import React, { FC, useState, useEffect } from 'react';\nimport Chessboard from 'chessboardjsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport { ChessInstance, Square } from 'chess.js'\nimport { GameTypes } from '../types';\n\nconst ChessReq:any = require('chess.js');\n\nconst useStyles = makeStyles({\n  board: {\n    marginTop: '20px',\n    boxShadow: '5px 5px 5px grey',\n  },\n  button: {\n    marginTop: '20px',\n    marginLeft: '10px',\n    marginRight: '10px',\n  }\n});\n\nenum Turn {\n  W = 'W',\n  B = 'B',\n};\n\ntype Move = {\n  sourceSquare: Square,\n  targetSquare: Square,\n};\n\nconst Game: FC = () => {\n  const classes = useStyles();\n\n  const [game] = useState<ChessInstance>(new ChessReq());\n  const [turn, setTurn] = useState<Turn>(Turn.W);\n  const [fen, setFen] = useState(\"start\");\n  const [gameType, setGameType] = useState<GameTypes | null>(null);\n\n  useEffect(() => {\n    if (game.game_over()) return;\n\n    if (turn === Turn.B) {\n      setTimeout(() => {\n        const newFen = randomMove(game)\n        if (!newFen) return; // no more legal moves\n        setTurn(Turn.W);\n        setFen(newFen);\n      }, 500);\n    }\n\n  }, [turn, game]);\n\n  const randomMove = (game: ChessInstance): string | null => {\n    const moves = game.moves();\n    const move = moves[Math.floor(Math.random() * moves.length)];\n    if (game.move(move) !== null) {\n      return game.fen();\n    }\n    return null;\n  }\n\n  const onDrop = ({ sourceSquare, targetSquare }: Move) => {\n    if (turn !== Turn.W) return;\n\n    let move = game.move({\n      from: sourceSquare,\n      to: targetSquare,\n      promotion: 'q', // always promote to queen\n    })\n\n    if (move === null) return;\n\n    setTurn(Turn.B);\n\n    setFen(game.fen());\n  };\n\n  return (\n    <div>\n      <div className={classes.board}>\n        <Chessboard \n          position={fen}\n          onDrop={onDrop}\n          transitionDuration={500}\n        />\n      </div>\n      {!gameType && (\n      <div>\n        <Button\n          className={classes.button}\n          variant=\"contained\"\n          onClick={(event) => setGameType(GameTypes.RANDOM_COMPUTER)}\n        >\n          Play a Computer\n        </Button>\n        <Button\n          className={classes.button}\n          variant=\"contained\"\n          onClick={(event) => setGameType(GameTypes.HUMAN)}\n        >\n          Play a Person\n        </Button>\n      </div>\n      )}\n    </div>\n  );\n};\n\nexport default Game;"]},"metadata":{},"sourceType":"module"}